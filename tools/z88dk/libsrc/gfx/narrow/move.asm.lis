/tmp/tmpXXdVf31L.asm:
     1                          MODULE move_asm
     2                          LINE 0, "move.asm"
move.asm:
                                
     1                          ;
     2                          ;     Turtle graphics library
     3                          ;     Stefano - 11/2017
     4                          ;
     5                          ;     $Id: move.asm $
     6                          ;
     7                          
     8                            IF    !__CPU_INTEL__&!__CPU_GBZ80__
     9                                  SECTION code_graphics
    10                                  PUBLIC  move
    11                                  PUBLIC  _move
    12                                  PUBLIC  ___move
    13                                  EXTERN  swapgfxbk
    14                                  EXTERN  __graphics_end
    15                          
    16                                  EXTERN  __pen
    17                                  EXTERN  Line_r
    18                                  EXTERN  plotpixel
    19                                  EXTERN  setxy
    20                                  INCLUDE "graphics/grafix.inc"
    21                          
    22                          
    23                          move:
    24                          _move:
    25                          ___move:
    26                                  push    ix
    27                                  ld      ix, 2
    28                                  add     ix, sp
    29                                  ld      e, (ix+2)               ;py
    30                                  ld      d, (ix+3)
    31                                  ld      l, (ix+4)               ;px
    32                                  ld      h, (ix+5)
    33                          
    34                              IF  NEED_swapgfxbk=1
    35                                  call    swapgfxbk
    36                              ENDIF
    37                          
    38                                  ld      a, (__pen)
    39                                  ld      ix, setxy
    40                                  rla
    41                                  jr      nc, pen_up
    42                                  ld      ix, plotpixel
    43                          pen_up:
    44                          
    45                                  call    Line_r
    46                              IF  NEED_swapgfxbk
    47                                  jp      __graphics_end
    48                              ELSE
    49                                IF    !__CPU_INTEL__&!__CPU_GBZ80__
    50                                  pop     ix
    51                                ENDIF
    52                                  ret
    53                              ENDIF
    54                            ENDIF
    55                          
